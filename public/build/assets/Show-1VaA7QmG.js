import{y as X,s as h,p as a,c as d,o as u,b as Y,a as e,B as V,j as M,F as z,g as N,t as l,d as U,e as g,n as _,z as x,v as Z}from"./app-QOUyzO7S.js";import{_ as G}from"./Header-BAhU3ZzG.js";const tt={class:"wrapper"},st={class:"main"},et={class:"container"},it={class:"product-container"},ot={class:"col-md-5"},lt=["src","data-src"],at={key:0,class:"row product__block"},nt=["src","onClick","onError"],ct={class:"col-md-6"},rt={class:"product-title"},dt={class:"row__order__desc"},ut={class:"col-md-5"},vt={class:"product-details"},mt={class:"detail-item"},pt={class:"detail-item"},_t={class:"detail-item"},bt={class:"product-price"},ht={class:"vertical__block"},gt={class:"vertical-thumbnails"},yt=["src","alt","onClick"],ft={key:0,class:"order-block"},kt={class:"stock"},xt=["max","onUpdate:modelValue"],$t={class:"total-section__bock"},It={class:"total-section"},Ct={class:"total-price"},wt={class:"tabs-container"},Vt={class:"tab-buttons"},zt={id:"description",class:"tab-content"},Nt=["innerHTML"],Ut={id:"characteristics",class:"tab-content"},Et={class:"property-item"},Lt={class:"property-item"},St={class:"property-item"},qt={id:"payment",class:"tab-content"},Tt={class:"property-item"},jt={class:"property-item"},At={id:"delivery",class:"tab-content"},Mt={class:"property-item"},Pt={class:"property-item"},Ft={__name:"Show",props:{product:{type:Object,required:!0},categories:Array,subcategories:Array},setup(E){X(()=>{if(n.product.variants&&n.product.variants.length>0){const s=n.product.variants[0];j(s)}});const n=E,b=h(I(n.product)),L=h(null),p=h(null),c=h("description"),y=s=>{c.value=s},v=a(()=>({description:n.product.content||"Описание товара отсутствует",characteristics:{color:p.value||"Не указан",size:k.value.map(s=>s.size).join(", ")||"Не указан",dimensions:r.value.dimensions||"Не указаны"},payment:{methods:"Наличные, карта, безналичный расчет",installment:"До 12 месяцев"},delivery:{time:"1-3 рабочих дня",cost:"Бесплатно при заказе от 5000 Руб."}})),S=a(()=>{const s={};return n.product.variants.forEach(t=>{`${t.color}${t.size}`,s[t.color]||(s[t.color]={}),s[t.color][t.size]||(s[t.color][t.size]={...t,total:0,variants:[]}),s[t.color][t.size].total+=t.total||0,s[t.color][t.size].variants.push(t)}),s}),r=a(()=>L.value||n.product),q=a(()=>r.value.total||0),P=a(()=>r.value.article||""),B=a(()=>r.value.sklad||"Москва"),T=a(()=>{const s=new Set,t=[];return n.product.variants.forEach(i=>{s.has(i.color)||(s.add(i.color),t.push(i))}),t});a(()=>{const s=[I(r.value)];return T.value.forEach(t=>{const i=C(t);i&&!s.includes(i)&&s.push(i)}),s});const D=s=>{if(!(s!=null&&s.title))return"";const t=s.title.indexOf(",");let i=t>0?s.title.substring(0,t).trim():s.title;if(s.color){const o=s.color.toLowerCase();i.toLowerCase().includes(o)||(i+=`, ${s.color}`)}return i},$=a(()=>{if(!r.value)return[];const s=I(r.value),t=s.split("/"),i=t[t.length-1],o=s.replace(i,""),m=[];for(let w=1;w<=5;w++){const K=`${w}_${i}`,Q=`${o}${K}`;m.push(Q)}return m}),f=h([]),F=a(()=>$.value.some(s=>!f.value.includes(s))),O=a(()=>$.value.filter(s=>!f.value.includes(s)));function W(s){const t=$.value[s];f.value.includes(t)||f.value.push(t)}function j(s){L.value=R(s),b.value=C(s),p.value=s.color}const k=a(()=>!p.value||!S.value[p.value]?[]:Object.values(S.value[p.value]));function H(s){b.value=s}function I(s){const t=s.url_img||s.photo;if(t&&t!=="1")return A(t);const i=s.sid,o=s.tovar_id||s.id_parent||s.id;return i&&o?`https://mvgifts.ru/img/tovars/${i}/${o}/${o}.jpg`:"https://via.placeholder.com/200?text=No+Image"}function C(s){const t=s.photo||s.url_img;if(t&&t!=="1")return A(t);const i=s.sid||n.product.sid,o=s.tovar_id||s.id_parent||s.id;return i&&o?`https://mvgifts.ru/img/tovars/${i}/${o}/${o}.jpg`:"https://via.placeholder.com/40?text=No+Img"}function A(s){return s?s.startsWith("http")?s:`https://mvgifts.ru${s.startsWith("/")?"":"/"}${s}`:""}function R(s){return{...s,sid:s.sid||n.product.sid,tovar_id:s.tovar_id||s.id_parent||s.id,url_img:s.photo||s.url_img||n.product.url_img}}function J(){let s=0;return k.value&&k.value.forEach(t=>{const i=t.quantity||0;s+=i*t.price}),s.toLocaleString("ru-RU")}return(s,t)=>(u(),d("div",tt,[Y(G,{categories:E.categories},null,8,["categories"]),e("main",st,[t[20]||(t[20]=V('<section class="breadcrumbs__block"><div class="container"><div class="breadcrumbs-container"><div class="row"><div class="col-xl-2"></div><div class="col-xl-8 crumbs"><div class="breadcrumbs-content"></div></div><div class="col-xl-2"></div></div></div></div></section>',1)),e("div",et,[e("div",it,[e("div",ot,[e("img",{id:"mainImage",src:b.value,"data-fancybox":"gallery","data-src":b.value,alt:"Основное фото товара",class:"main-image"},null,8,lt),F.value?(u(),d("div",at,[(u(!0),d(z,null,N(O.value,(i,o)=>(u(),d("div",{class:"col-4",key:o},[e("img",{src:i,alt:"Дополнительное фото",class:_(["thumbnail",{active:b.value===i}]),onClick:m=>H(i),onError:m=>W(o)},null,42,nt)]))),128))])):M("",!0)]),e("div",ct,[e("h1",rt,l(D(r.value)),1),e("div",dt,[e("div",ut,[e("div",vt,[e("div",mt,[t[4]||(t[4]=e("span",{class:"detail-label"},"Артикул:",-1)),U(" "+l(P.value),1)]),e("div",pt,[t[5]||(t[5]=e("span",{class:"detail-label"},"Склад:",-1)),U(" "+l(B.value),1)]),e("div",_t,[t[6]||(t[6]=e("span",{class:"detail-label"},"Количество:",-1)),U(" "+l(q.value>0?q.value+" шт.":"по запросу"),1)]),t[7]||(t[7]=V('<div class="detail-item"><span class="detail-label">Срок доставки:</span><a href=""> по запросу</a></div><div class="custom-checkbox-container" id="customCheckboxContainer"><label for="customCheckbox" class="custom-checkbox-label">без нанесения</label><input type="checkbox" class="custom-checkbox" id="customCheckbox"></div>',2)),e("div",bt,l(r.value.price)+" ₽",1)])]),e("div",ht,[e("div",gt,[(u(!0),d(z,null,N(T.value,(i,o)=>(u(),d("img",{key:"variant-"+o,src:C(i),alt:{variant:i},class:_(["small-thumbnail",{active:p.value===i.color}]),onClick:m=>j(i)},null,10,yt))),128))])])]),p.value?(u(),d("div",ft,[t[10]||(t[10]=V('<div class="grid-header"><div class="header-item">Наличие</div><div class="header-item">Введите количество</div><div class="header-item">Размер</div><div class="header-item">Цена</div></div>',1)),(u(!0),d(z,null,N(k.value,(i,o)=>(u(),d("div",{class:"product-row",key:o},[e("div",kt,l(i.total>0?i.total+" шт":"по запросу"),1),e("div",null,[g(e("input",{type:"number",min:"0",max:i.total,class:"quantity-input","onUpdate:modelValue":m=>i.quantity=m},null,8,xt),[[Z,i.quantity]])]),e("div",null,l(i.size),1),e("div",null,l(i.price)+" ₽",1)]))),128)),e("div",$t,[e("div",It,[e("div",null,[t[8]||(t[8]=e("div",{class:"total-text"},"Итого",-1)),e("div",Ct,l(J())+" ₽",1)])]),t[9]||(t[9]=e("div",{class:"total-section__button"},[e("button",{class:"btn btn-primary submit-btn btn__red"},"ЗАПРОСИТЬ")],-1))]),t[11]||(t[11]=e("div",{class:"note"}," *указанная сумма не включает в себя стоимость нанесения логотипа ",-1))])):M("",!0),t[19]||(t[19]=e("button",{class:"order-btn"},"Заказ принимается на сумму от 5000 Руб..",-1)),e("div",wt,[e("div",Vt,[e("button",{class:_(["tab-btn",{active:c.value==="description"}]),onClick:t[0]||(t[0]=i=>y("description"))}," Описание ",2),e("button",{class:_(["tab-btn",{active:c.value==="characteristics"}]),onClick:t[1]||(t[1]=i=>y("characteristics"))}," Характеристики ",2),e("button",{class:_(["tab-btn",{active:c.value==="payment"}]),onClick:t[2]||(t[2]=i=>y("payment"))}," Оплата ",2),e("button",{class:_(["tab-btn",{active:c.value==="delivery"}]),onClick:t[3]||(t[3]=i=>y("delivery"))}," Доставка ",2)]),g(e("div",zt,[e("div",{class:"property-item",innerHTML:v.value.description},null,8,Nt)],512),[[x,c.value==="description"]]),g(e("div",Ut,[e("div",Et,[t[12]||(t[12]=e("div",{class:"property-title"},"Цвет",-1)),e("div",null,l(v.value.characteristics.color),1)]),e("div",Lt,[t[13]||(t[13]=e("div",{class:"property-title"},"Размеры",-1)),e("div",null,l(v.value.characteristics.size),1)]),e("div",St,[t[14]||(t[14]=e("div",{class:"property-title"},"Габариты",-1)),e("div",null,l(v.value.characteristics.dimensions),1)])],512),[[x,c.value==="characteristics"]]),g(e("div",qt,[e("div",Tt,[t[15]||(t[15]=e("div",{class:"property-title"},"Способы оплаты",-1)),e("div",null,l(v.value.payment.methods),1)]),e("div",jt,[t[16]||(t[16]=e("div",{class:"property-title"},"Рассрочка",-1)),e("div",null,l(v.value.payment.installment),1)])],512),[[x,c.value==="payment"]]),g(e("div",At,[e("div",Mt,[t[17]||(t[17]=e("div",{class:"property-title"},"Сроки доставки",-1)),e("div",null,l(v.value.delivery.time),1)]),e("div",Pt,[t[18]||(t[18]=e("div",{class:"property-title"},"Стоимость",-1)),e("div",null,l(v.value.delivery.cost),1)])],512),[[x,c.value==="delivery"]])])])])])])]))}};export{Ft as default};
