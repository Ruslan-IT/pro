import{s as _,y as lt,p as n,c as r,o as d,b as U,a as s,w as at,t as l,u as H,m as nt,D as Q,j as q,F as C,g as T,d as x,e as y,n as b,q as ct,z as I}from"./app-Cyyyi0Um.js";import{u as rt,_ as dt}from"./Header-CHi1hNXX.js";import{F as ut}from"./Footer-DEGeV3Vd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const vt={class:"wrapper"},mt={class:"main"},pt={class:"container"},_t={class:"product-container"},bt={class:"col-md-5"},ht=["src","data-src"],gt={key:0,class:"row product__block"},ft=["src","onClick","onError"],yt={class:"col-md-6"},kt={class:"product-title"},$t={class:"row__order__desc"},Ct={class:"col-md-5"},xt={class:"product-details"},It={class:"detail-item"},wt={class:"detail-item"},zt={class:"detail-item"},St={class:"custom-checkbox-container",id:"customCheckboxContainer"},Vt={key:0},Nt={class:"product-price"},Et={class:"vertical__block"},Lt={class:"vertical-thumbnails"},Ut=["src","alt","onClick"],qt={key:0,class:"order-block"},Tt={class:"stock"},jt=["value","onInput"],At={class:"total-section__bock"},Pt={class:"total-section"},Dt={class:"total-price"},Ft={class:"tabs-container"},Mt={class:"tab-buttons"},Bt={id:"description",class:"tab-content"},Ot=["innerHTML"],Wt={id:"characteristics",class:"tab-content"},Ht={class:"property-item"},Qt={class:"property-item"},Rt={class:"property-item"},Jt={id:"payment",class:"tab-content"},Kt={class:"property-item"},Xt={class:"property-item"},Yt={id:"delivery",class:"tab-content"},Zt={class:"property-item"},Gt={class:"property-item"},ie={__name:"Show",props:{product:{type:Object,required:!0},categories:Array,subcategories:Array},setup(j){const w=rt(),h=_(!1),R=w.printingCost;lt(()=>{if(a.product.variants&&a.product.variants.length>0){const t=a.product.variants[0];B(t)}});const a=j,g=_(V(a.product)),A=_(null),p=_(null),u=_("description"),k=t=>{console.log("Switching to tab:",t),u.value=t},v=n(()=>({description:a.product.content||"Описание товара отсутствует",characteristics:{color:p.value||"Не указан",size:f.value.map(t=>t.size).join(", ")||"Не указан",dimensions:c.value.dimensions||"Не указаны"},payment:{methods:"Наличные, карта, безналичный расчет",installment:"До 12 месяцев"},delivery:{time:"1-3 рабочих дня",cost:"Бесплатно при заказе от 5000 Руб."}})),P=n(()=>{const t={};return a.product.variants.forEach(e=>{`${e.color}${e.size}`,t[e.color]||(t[e.color]={}),t[e.color][e.size]||(t[e.color][e.size]={...e,total:0,variants:[]}),t[e.color][e.size].total+=e.total||0,t[e.color][e.size].variants.push(e)}),t}),c=n(()=>A.value||a.product),D=n(()=>c.value.total||0),F=n(()=>c.value.article||""),J=n(()=>c.value.sklad||"Москва"),M=n(()=>{const t=new Set,e=[];return a.product.variants.forEach(o=>{t.has(o.color)||(t.add(o.color),e.push(o))}),e});n(()=>{const t=[V(c.value)];return M.value.forEach(e=>{const o=N(e);o&&!t.includes(o)&&t.push(o)}),t});const z=t=>{if(!(t!=null&&t.title))return"";const e=t.title.indexOf(",");let o=e>0?t.title.substring(0,e).trim():t.title;if(t.color){const i=t.color.toLowerCase();o.toLowerCase().includes(i)||(o+=`, ${t.color}`)}return o},S=n(()=>{if(!c.value)return[];const t=V(c.value),e=t.split("/"),o=e[e.length-1],i=t.replace(o,""),m=[];for(let L=1;L<=5;L++){const ot=`${L}_${o}`,it=`${i}${ot}`;m.push(it)}return m}),$=_([]),K=n(()=>S.value.some(t=>!$.value.includes(t))),X=n(()=>S.value.filter(t=>!$.value.includes(t)));function Y(t){const e=S.value[t];$.value.includes(e)||$.value.push(e)}function B(t){A.value=G(t),g.value=N(t),p.value=t.color}const f=n(()=>!p.value||!P.value[p.value]?[]:Object.values(P.value[p.value]));function Z(t){g.value=t}function V(t){const e=t.url_img||t.photo;if(e&&e!=="1")return O(e);const o=t.sid,i=t.tovar_id||t.id_parent||t.id;return o&&i?`https://mvgifts.ru/img/tovars/${o}/${i}/${i}.jpg`:"https://via.placeholder.com/200?text=No+Image"}function N(t){const e=t.photo||t.url_img;if(e&&e!=="1")return O(e);const o=t.sid||a.product.sid,i=t.tovar_id||t.id_parent||t.id;return o&&i?`https://mvgifts.ru/img/tovars/${o}/${i}/${i}.jpg`:"https://via.placeholder.com/40?text=No+Img"}function O(t){return t?t.startsWith("http")?t:`https://mvgifts.ru${t.startsWith("/")?"":"/"}${t}`:""}function G(t){return{...t,sid:t.sid||a.product.sid,tovar_id:t.tovar_id||t.id_parent||t.id,url_img:t.photo||t.url_img||a.product.url_img}}const E=_({});function tt(){let t=0;return f.value&&f.value.forEach(e=>{const o=`${e.color}_${e.size}`,i=E.value[o]||0;t+=i*e.price}),t.toLocaleString("ru-RU")}function W(t){const e=`${t.color}_${t.size}`;return E.value[e]||0}function et(t,e){const o=`${t.color}_${t.size}`;E.value[o]=Number(e)}function st(){f.value.forEach(t=>{const e=W(t);e>0&&w.addItem({id:`${a.product.id}_${t.color}_${t.size}`,title:z(c.value),price:t.price,article:F.value},t.color,t.size,e,g.value,h.value)}),w.openCart()}return(t,e)=>(d(),r(C,null,[U(H(nt),null,{default:at(()=>[s("title",null,l(z(c.value)),1)]),_:1}),s("div",vt,[U(dt,{categories:j.categories},null,8,["categories"]),s("main",mt,[e[20]||(e[20]=Q('<section class="breadcrumbs__block"><div class="container"><div class="breadcrumbs-container"><div class="row"><div class="col-xl-2"></div><div class="col-xl-8 crumbs"><div class="breadcrumbs-content"></div></div><div class="col-xl-2"></div></div></div></div></section>',1)),s("div",pt,[s("div",_t,[s("div",bt,[s("img",{id:"mainImage",src:g.value,"data-fancybox":"gallery","data-src":g.value,alt:"Основное фото товара",class:"main-image"},null,8,ht),K.value?(d(),r("div",gt,[(d(!0),r(C,null,T(X.value,(o,i)=>(d(),r("div",{class:"col-4",key:i},[s("img",{src:o,alt:"Дополнительное фото",class:b(["thumbnail",{active:g.value===o}]),onClick:m=>Z(o),onError:m=>Y(i)},null,42,ft)]))),128))])):q("",!0)]),s("div",yt,[s("h1",kt,l(z(c.value)),1),s("div",$t,[s("div",Ct,[s("div",xt,[s("div",It,[e[5]||(e[5]=s("span",{class:"detail-label"},"Артикул:",-1)),x(" "+l(F.value),1)]),s("div",wt,[e[6]||(e[6]=s("span",{class:"detail-label"},"Склад:",-1)),x(" "+l(J.value),1)]),s("div",zt,[e[7]||(e[7]=s("span",{class:"detail-label"},"Количество:",-1)),x(" "+l(D.value>0?D.value+" шт.":"по запросу"),1)]),e[8]||(e[8]=s("div",{class:"detail-item"},[s("span",{class:"detail-label"},"Срок доставки:"),s("a",{href:""}," по запросу")],-1)),s("div",St,[s("label",{for:"customCheckbox",class:b({"custom-checkbox-label":!0,active:h.value})},[x(l(h.value?"С нанесением":"Без нанесения")+" ",1),h.value?(d(),r("span",Vt,"(+ "+l(H(R))+" ₽)",1)):q("",!0)],2),y(s("input",{type:"checkbox",class:"custom-checkbox",id:"customCheckbox","onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o)},null,512),[[ct,h.value]])]),s("div",Nt,l(c.value.price)+" ₽",1)])]),s("div",Et,[s("div",Lt,[(d(!0),r(C,null,T(M.value,(o,i)=>(d(),r("img",{key:"variant-"+i,src:N(o),alt:{variant:o},class:b(["small-thumbnail",{active:p.value===o.color}]),onClick:m=>B(o)},null,10,Ut))),128))])])]),p.value?(d(),r("div",qt,[e[10]||(e[10]=Q('<div class="grid-header"><div class="header-item">Наличие</div><div class="header-item">Введите количество</div><div class="header-item">Размер</div><div class="header-item">Цена</div></div>',1)),(d(!0),r(C,null,T(f.value,(o,i)=>(d(),r("div",{class:"product-row",key:i},[s("div",Tt,l(o.total>0?o.total+" шт":"по запросу"),1),s("div",null,[s("input",{type:"text",min:"0",class:"quantity-input",value:W(o),onInput:m=>et(o,m.target.value)},null,40,jt)]),s("div",null,l(o.size),1),s("div",null,l(o.price)+" ₽",1)]))),128)),s("div",At,[s("div",Pt,[s("div",null,[e[9]||(e[9]=s("div",{class:"total-text"},"Итого",-1)),s("div",Dt,l(tt())+" ₽",1)])]),s("div",{class:"total-section__button"},[s("a",{class:"btn btn-primary submit-btn btn__red",onClick:st}," ЗАПРОСИТЬ ")])]),e[11]||(e[11]=s("div",{class:"note"}," *указанная сумма не включает в себя стоимость нанесения логотипа ",-1))])):q("",!0),e[19]||(e[19]=s("button",{class:"order-btn"}," Заказ принимается на сумму от 5000 Руб.. ",-1)),s("div",Ft,[s("div",Mt,[s("button",{class:b(["tab-btn",{active:u.value==="description"}]),onClick:e[1]||(e[1]=o=>k("description"))}," Описание ",2),s("button",{class:b(["tab-btn",{active:u.value==="characteristics"}]),onClick:e[2]||(e[2]=o=>k("characteristics"))}," Характеристики ",2),s("button",{class:b(["tab-btn",{active:u.value==="payment"}]),onClick:e[3]||(e[3]=o=>k("payment"))}," Оплата ",2),s("button",{class:b(["tab-btn",{active:u.value==="delivery"}]),onClick:e[4]||(e[4]=o=>k("delivery"))}," Доставка ",2)]),y(s("div",Bt,[s("div",{class:"property-item",innerHTML:v.value.description},null,8,Ot)],512),[[I,u.value==="description"]]),y(s("div",Wt,[s("div",Ht,[e[12]||(e[12]=s("div",{class:"property-title"},"Цвет",-1)),s("div",null,l(v.value.characteristics.color),1)]),s("div",Qt,[e[13]||(e[13]=s("div",{class:"property-title"},"Размеры",-1)),s("div",null,l(v.value.characteristics.size),1)]),s("div",Rt,[e[14]||(e[14]=s("div",{class:"property-title"},"Габариты",-1)),s("div",null,l(v.value.characteristics.dimensions),1)])],512),[[I,u.value==="characteristics"]]),y(s("div",Jt,[s("div",Kt,[e[15]||(e[15]=s("div",{class:"property-title"},"Способы оплаты",-1)),s("div",null,l(v.value.payment.methods),1)]),s("div",Xt,[e[16]||(e[16]=s("div",{class:"property-title"},"Рассрочка",-1)),s("div",null,l(v.value.payment.installment),1)])],512),[[I,u.value==="payment"]]),y(s("div",Yt,[s("div",Zt,[e[17]||(e[17]=s("div",{class:"property-title"},"Сроки доставки",-1)),s("div",null,l(v.value.delivery.time),1)]),s("div",Gt,[e[18]||(e[18]=s("div",{class:"property-title"},"Стоимость",-1)),s("div",null,l(v.value.delivery.cost),1)])],512),[[I,u.value==="delivery"]])])])])])]),U(ut)])],64))}};export{ie as default};
