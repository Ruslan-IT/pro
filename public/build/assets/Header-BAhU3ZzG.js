import{s as o,p as X,A as Y,y as Z,c as n,o as t,B as D,a as e,e as V,v as ee,z as E,F as v,g as f,j as b,b as B,w as y,d as M,u as x,S,i as H,t as _,l as ae}from"./app-QOUyzO7S.js";const se={class:"header"},le={class:"container"},te={class:"row header__search"},ne={class:"col-xl-8"},oe={class:"input-group"},ie={class:"search-results-dropdown"},re={key:0,class:"search-loading"},ue={key:0,class:"no-results"},de={class:"row header__menu"},ce={class:"col-xl-8"},ve={class:"navbar navbar-expand-lg navbar-light bg-light"},_e={class:"container-fluid header__menu"},he={class:"collapse navbar-collapse",id:"navbarNav"},pe={class:"navbar-nav"},me={class:"wrap_c"},ge={class:"list"},fe=["href","onMouseenter"],be={class:"table"},ke={class:"margin"},we={style:{"text-transform":"uppercase"}},ye={class:"subcategory-column"},Me=["href","onMouseenter"],xe=["href"],Se={key:0,class:"drawing-dropdown"},Te={class:"drawing-dropdown-content"},Ne={class:"nav-item"},Ce={class:"nav-item"},Be={__name:"Header",props:{categories:Array,drawings:Array},setup($){const T=$,N=o(!1),h=o(null),p=o(null),k=o(null),w=o(!1),u=o(""),r=o([]),m=o(!1),F=o(null),C=o(!1),g=o(!1),d=o([]),I=X(()=>d.value.length>0?d.value:T.drawings||[]);Y(()=>T.drawings,l=>{l&&l.length>0&&(d.value=l)},{immediate:!0});const j=()=>{clearTimeout(k.value),N.value=!0,w.value=!0},q=()=>{k.value=setTimeout(()=>{w.value||(N.value=!1,h.value=null,p.value=null)},300)},z=()=>{w.value=!0,clearTimeout(k.value)},R=()=>{w.value=!1,q()},P=l=>{h.value=l,p.value=null},Q=l=>{p.value=l},U=l=>{if(!h.value)return[];const a=T.categories.find(c=>c.id===h.value);if(!a||!a.children)return[];const s=a.children.find(c=>c.id===l);return(s==null?void 0:s.children)||[]},A=()=>{clearTimeout(k.value)},G=()=>{if(clearTimeout(F.value),!u.value.trim()){r.value=[];return}F.value=setTimeout(()=>{J()},300)},J=async()=>{if(!u.value.trim()){r.value=[];return}C.value=!0;try{const l=await H.get(route("client.products.search"),{params:{query:u.value}});r.value=l.data}catch(l){console.error("Search error:",l),r.value=[]}finally{C.value=!1}},L=()=>{setTimeout(()=>{m.value=!1},200)},K=()=>{m.value=!0},O=async()=>{if(d.value.length>0){g.value=!0;return}try{const l=await H.get(route("client.drawing.list"));d.value=l.data,g.value=!0}catch(l){console.error("Failed to fetch drawings",l),d.value=[{id:1,url:"tampopechat",title:"Тампопечать"},{id:2,url:"tisnenie",title:"Тиснение"},{id:3,url:"gravirovka",title:"Гравировка"},{id:4,url:"shelkografiya",title:"Шелкография"},{id:5,url:"dekol",title:"Деколь"},{id:6,url:"cifrovaya-pechat",title:"Цифровая печать"},{id:7,url:"vyshivka",title:"Вышивка"},{id:8,url:"uf-pechat",title:"УФ печать"}],g.value=!0}},W=()=>{setTimeout(()=>{g.value=!1},300)};return Z(()=>{}),(l,a)=>(t(),n("header",se,[a[18]||(a[18]=D('<div class="row header__top__block__main"><div class="container__header"><div class="container__header__flex"><div class=""><div class="header__top d-flex"><div class="d-block d-md-none"><a href="tel:+74993943841" class="header__phone">8 (499) 394-38-41</a></div><span class="company">|</span><div class="header__top__block company"><a href="">О компании</a></div><span>|</span><div class="header__top__block"><button type="submit" class="btn btn-primary submit-btn btn__red">ЗАКАЗАТЬ ЗВОНОК</button></div><span>|</span><div class="header__top__block"><div class="header__top__cart"><div class="header__top__img"><img src="/img/cart.png" alt=""></div><div class="header__top__info"><p class="min__order">Минимальный заказ</p><p class="rub">15 0007 Р</p></div></div></div></div></div></div></div></div>',1)),e("div",le,[e("div",te,[a[4]||(a[4]=e("div",{class:"col-xl-2"},[e("img",{src:"https://web-ruslan.ru/img/logo.png",alt:"logo"})],-1)),e("div",ne,[a[3]||(a[3]=e("button",{class:"navbar-toggler ds-mob",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",oe,[V(e("input",{type:"text",class:"form-control",placeholder:"Поиск товаров по названию или артикулу","onUpdate:modelValue":a[0]||(a[0]=s=>u.value=s),onInput:G,onFocus:a[1]||(a[1]=s=>m.value=!0),onBlur:L},null,544),[[ee,u.value]]),a[2]||(a[2]=e("div",{class:"input-group-append"},[e("button",{class:"btn btn-secondary",type:"button"},[e("img",{src:"https://web-ruslan.ru/img/ser.png",alt:"search"})])],-1)),V(e("div",{class:"search-results-dropdown",onMouseenter:K,onMouseleave:L},[(t(!0),n(v,null,f(r.value,s=>(t(),n("div",{class:"search-result-item",key:s.id},[B(x(S),{href:l.route("client.products.show",s.url)},{default:y(()=>[M(_(s.title)+" ("+_(s.article)+") ",1)]),_:2},1032,["href"])]))),128))],544),[[E,m.value&&r.value.length>0]]),V(e("div",ie,[C.value?(t(),n("div",re," Загрузка... ")):(t(),n(v,{key:1},[r.value.length===0&&u.value?(t(),n("div",ue," Ничего не найдено ")):b("",!0)],64))],512),[[E,m.value]])])]),a[5]||(a[5]=D('<div class="col-xl-2 phone__mob__none"><span><a href="">8 (499) 394 38 41</a></span></div><div class="catalogmobile__my"><div class="nav-item catalog"><a class="nav-link" href="#">КАТАЛОГ</a><span></span></div></div>',2))]),e("div",de,[a[16]||(a[16]=e("div",{class:"col-xl-2"},null,-1)),e("div",ce,[e("nav",ve,[e("div",_e,[e("div",he,[e("ul",pe,[e("li",{class:"nav-item catal catalog__desc",onMouseenter:j,onMouseleave:R},[a[6]||(a[6]=e("a",{class:"nav-link catalog__mar",href:"#"},"КАТАЛОГ",-1)),a[7]||(a[7]=e("span",null,null,-1)),N.value?(t(),n("section",{key:0,class:"catalog_drop",onMouseenter:z,onMouseleave:R},[e("div",me,[e("div",ge,[(t(!0),n(v,null,f($.categories,s=>{var c;return t(),n("a",{href:`/categories/${s.url}/products`,class:"item",key:s.id,onMouseenter:i=>P(s.id)},[e("div",be,[e("div",ke,[e("p",we,_(s.title),1)])]),h.value===s.id&&((c=s.children)!=null&&c.length)?(t(),n("div",{key:0,class:"subcategories",onMouseenter:A},[e("div",ye,[(t(!0),n(v,null,f(s.children,i=>(t(),n("a",{key:i.id,href:`/categories/${i.url}/products`,onMouseenter:De=>Q(i.id)},_(i.title),41,Me))),128))]),p.value?(t(),n("div",{key:0,class:"sub-subcategories",onMouseenter:A},[(t(!0),n(v,null,f(U(p.value),i=>(t(),n("div",{key:i.id},[e("a",{href:`/catalog/${i.url}/`},_(i.title),9,xe)]))),128))],32)):b("",!0)],32)):b("",!0)],40,fe)}),128))])])],32)):b("",!0)],32),a[12]||(a[12]=e("li",{class:"nav-item"},[e("a",{class:"nav-link",href:"#"},"ПОРТФОЛИО")],-1)),e("li",{class:"nav-item drawing-menu",onMouseenter:O,onMouseleave:W},[a[8]||(a[8]=e("a",{class:"nav-link",href:"#"},"НАНЕСЕНИЕ",-1)),a[9]||(a[9]=e("span",null,null,-1)),g.value?(t(),n("div",Se,[e("div",Te,[(t(!0),n(v,null,f(I.value,s=>(t(),ae(x(S),{key:s.id,href:l.route("client.drawing.show",s.url),class:"drawing-dropdown-item"},{default:y(()=>[M(_(s.title),1)]),_:2},1032,["href"]))),128))])])):b("",!0)],32),e("li",Ne,[B(x(S),{class:"nav-link",href:l.route("client.contacts.index")},{default:y(()=>a[10]||(a[10]=[M("КОНТАКТЫ")])),_:1,__:[10]},8,["href"])]),a[13]||(a[13]=e("li",{class:"nav-item"},[e("a",{class:"nav-link",href:"/news"},"НОВОСТИ")],-1)),e("li",Ce,[B(x(S),{class:"nav-link",href:l.route("client.payment-delivery.index")},{default:y(()=>a[11]||(a[11]=[M("ОПЛАТА И ДОСТАВКА")])),_:1,__:[11]},8,["href"])]),a[14]||(a[14]=D('<li class="nav-item nav__block__none"><a class="more_menu nav-link" href="#">Преимущества</a></li><li class="nav-item nav__block__none"><a class="more_menu nav-link" href="#">Награды</a></li><li class="nav-item nav__block__none"><a class="more_menu nav-link" href="#">Благодарности</a></li><li class="nav-item nav__block__none"><a class="more_menu nav-link" href="#">Новости</a></li><li class="nav-item nav__block__none"><a class="more_menu nav-link" href="#">Статьи</a></li><li class="nav-item nav__block__none"><a class="more_menu nav-link" href="#">Вопросы и ответы</a></li><li class="nav-item nav__block__none menu__phone"><a class="nav-link" href="#">8 (499) 394 38 41</a></li><li class="nav-item nav__block__none"><a class="nav-link menu__email" href="#">info@mvgifts.ru</a></li>',8))]),a[15]||(a[15]=e("button",{class:"btn-close d-lg-none ms-auto",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-label":"Close"},null,-1))])])])]),a[17]||(a[17]=e("div",{class:"col-xl-2"},null,-1))])])]))}};export{Be as _};
