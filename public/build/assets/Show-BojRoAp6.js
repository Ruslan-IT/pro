import{s as b,y as ot,p as n,c as r,o as d,b as it,a as s,D as W,j as E,F as L,g as U,t as l,d as C,e as y,n as h,u as lt,q as at,z as I}from"./app-CzakFkXn.js";import{u as nt,_ as ct}from"./Header-q_5tzkWO.js";const rt={class:"wrapper"},dt={class:"main"},ut={class:"container"},vt={class:"product-container"},mt={class:"col-md-5"},pt=["src","data-src"],_t={key:0,class:"row product__block"},bt=["src","onClick","onError"],ht={class:"col-md-6"},gt={class:"product-title"},ft={class:"row__order__desc"},yt={class:"col-md-5"},kt={class:"product-details"},$t={class:"detail-item"},Ct={class:"detail-item"},It={class:"detail-item"},xt={class:"custom-checkbox-container",id:"customCheckboxContainer"},wt={key:0},zt={class:"product-price"},St={class:"vertical__block"},Vt={class:"vertical-thumbnails"},Nt=["src","alt","onClick"],Et={key:0,class:"order-block"},Lt={class:"stock"},Ut=["value","onInput"],qt={class:"total-section__bock"},Tt={class:"total-section"},jt={class:"total-price"},At={class:"tabs-container"},Pt={class:"tab-buttons"},Dt={id:"description",class:"tab-content"},Mt=["innerHTML"],Bt={id:"characteristics",class:"tab-content"},Ft={class:"property-item"},Ot={class:"property-item"},Wt={class:"property-item"},Ht={id:"payment",class:"tab-content"},Qt={class:"property-item"},Rt={class:"property-item"},Jt={id:"delivery",class:"tab-content"},Kt={class:"property-item"},Xt={class:"property-item"},Gt={__name:"Show",props:{product:{type:Object,required:!0},categories:Array,subcategories:Array},setup(q){const x=nt(),p=b(!1),H=x.printingCost;ot(()=>{if(a.product.variants&&a.product.variants.length>0){const t=a.product.variants[0];B(t)}});const a=q,g=b(z(a.product)),T=b(null),_=b(null),u=b("description"),k=t=>{console.log("Switching to tab:",t),u.value=t},v=n(()=>({description:a.product.content||"Описание товара отсутствует",characteristics:{color:_.value||"Не указан",size:f.value.map(t=>t.size).join(", ")||"Не указан",dimensions:c.value.dimensions||"Не указаны"},payment:{methods:"Наличные, карта, безналичный расчет",installment:"До 12 месяцев"},delivery:{time:"1-3 рабочих дня",cost:"Бесплатно при заказе от 5000 Руб."}})),j=n(()=>{const t={};return a.product.variants.forEach(e=>{`${e.color}${e.size}`,t[e.color]||(t[e.color]={}),t[e.color][e.size]||(t[e.color][e.size]={...e,total:0,variants:[]}),t[e.color][e.size].total+=e.total||0,t[e.color][e.size].variants.push(e)}),t}),c=n(()=>T.value||a.product),A=n(()=>c.value.total||0),P=n(()=>c.value.article||""),Q=n(()=>c.value.sklad||"Москва"),D=n(()=>{const t=new Set,e=[];return a.product.variants.forEach(o=>{t.has(o.color)||(t.add(o.color),e.push(o))}),e});n(()=>{const t=[z(c.value)];return D.value.forEach(e=>{const o=S(e);o&&!t.includes(o)&&t.push(o)}),t});const M=t=>{if(!(t!=null&&t.title))return"";const e=t.title.indexOf(",");let o=e>0?t.title.substring(0,e).trim():t.title;if(t.color){const i=t.color.toLowerCase();o.toLowerCase().includes(i)||(o+=`, ${t.color}`)}return o},w=n(()=>{if(!c.value)return[];const t=z(c.value),e=t.split("/"),o=e[e.length-1],i=t.replace(o,""),m=[];for(let N=1;N<=5;N++){const et=`${N}_${o}`,st=`${i}${et}`;m.push(st)}return m}),$=b([]),R=n(()=>w.value.some(t=>!$.value.includes(t))),J=n(()=>w.value.filter(t=>!$.value.includes(t)));function K(t){const e=w.value[t];$.value.includes(e)||$.value.push(e)}function B(t){T.value=Y(t),g.value=S(t),_.value=t.color}const f=n(()=>!_.value||!j.value[_.value]?[]:Object.values(j.value[_.value]));function X(t){g.value=t}function z(t){const e=t.url_img||t.photo;if(e&&e!=="1")return F(e);const o=t.sid,i=t.tovar_id||t.id_parent||t.id;return o&&i?`https://mvgifts.ru/img/tovars/${o}/${i}/${i}.jpg`:"https://via.placeholder.com/200?text=No+Image"}function S(t){const e=t.photo||t.url_img;if(e&&e!=="1")return F(e);const o=t.sid||a.product.sid,i=t.tovar_id||t.id_parent||t.id;return o&&i?`https://mvgifts.ru/img/tovars/${o}/${i}/${i}.jpg`:"https://via.placeholder.com/40?text=No+Img"}function F(t){return t?t.startsWith("http")?t:`https://mvgifts.ru${t.startsWith("/")?"":"/"}${t}`:""}function Y(t){return{...t,sid:t.sid||a.product.sid,tovar_id:t.tovar_id||t.id_parent||t.id,url_img:t.photo||t.url_img||a.product.url_img}}const V=b({});function Z(){let t=0;return f.value&&f.value.forEach(e=>{const o=`${e.color}_${e.size}`,i=V.value[o]||0;t+=i*e.price}),t.toLocaleString("ru-RU")}function O(t){const e=`${t.color}_${t.size}`;return V.value[e]||0}function G(t,e){const o=`${t.color}_${t.size}`;V.value[o]=Number(e)}function tt(){f.value.forEach(t=>{const e=O(t);e>0&&(alert(p.value),x.addItem({id:`${a.product.id}_${t.color}_${t.size}`,title:M(c.value),price:t.price,article:P.value},t.color,t.size,e,g.value,p.value))}),x.openCart()}return(t,e)=>(d(),r("div",rt,[it(ct,{categories:q.categories},null,8,["categories"]),s("main",dt,[e[20]||(e[20]=W('<section class="breadcrumbs__block"><div class="container"><div class="breadcrumbs-container"><div class="row"><div class="col-xl-2"></div><div class="col-xl-8 crumbs"><div class="breadcrumbs-content"></div></div><div class="col-xl-2"></div></div></div></div></section>',1)),s("div",ut,[s("div",vt,[s("div",mt,[s("img",{id:"mainImage",src:g.value,"data-fancybox":"gallery","data-src":g.value,alt:"Основное фото товара",class:"main-image"},null,8,pt),R.value?(d(),r("div",_t,[(d(!0),r(L,null,U(J.value,(o,i)=>(d(),r("div",{class:"col-4",key:i},[s("img",{src:o,alt:"Дополнительное фото",class:h(["thumbnail",{active:g.value===o}]),onClick:m=>X(o),onError:m=>K(i)},null,42,bt)]))),128))])):E("",!0)]),s("div",ht,[s("h1",gt,l(M(c.value)),1),s("div",ft,[s("div",yt,[s("div",kt,[s("div",$t,[e[5]||(e[5]=s("span",{class:"detail-label"},"Артикул:",-1)),C(" "+l(P.value),1)]),s("div",Ct,[e[6]||(e[6]=s("span",{class:"detail-label"},"Склад:",-1)),C(" "+l(Q.value),1)]),s("div",It,[e[7]||(e[7]=s("span",{class:"detail-label"},"Количество:",-1)),C(" "+l(A.value>0?A.value+" шт.":"по запросу"),1)]),e[8]||(e[8]=s("div",{class:"detail-item"},[s("span",{class:"detail-label"},"Срок доставки:"),s("a",{href:""}," по запросу")],-1)),s("div",xt,[s("label",{for:"customCheckbox",class:h({"custom-checkbox-label":!0,active:p.value})},[C(l(p.value?"С нанесением":"Без нанесения")+" ",1),p.value?(d(),r("span",wt,"(+ "+l(lt(H))+" ₽)",1)):E("",!0)],2),y(s("input",{type:"checkbox",class:"custom-checkbox",id:"customCheckbox","onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o)},null,512),[[at,p.value]])]),s("div",zt,l(c.value.price)+" ₽",1)])]),s("div",St,[s("div",Vt,[(d(!0),r(L,null,U(D.value,(o,i)=>(d(),r("img",{key:"variant-"+i,src:S(o),alt:{variant:o},class:h(["small-thumbnail",{active:_.value===o.color}]),onClick:m=>B(o)},null,10,Nt))),128))])])]),_.value?(d(),r("div",Et,[e[10]||(e[10]=W('<div class="grid-header"><div class="header-item">Наличие</div><div class="header-item">Введите количество</div><div class="header-item">Размер</div><div class="header-item">Цена</div></div>',1)),(d(!0),r(L,null,U(f.value,(o,i)=>(d(),r("div",{class:"product-row",key:i},[s("div",Lt,l(o.total>0?o.total+" шт":"по запросу"),1),s("div",null,[s("input",{type:"text",min:"0",class:"quantity-input",value:O(o),onInput:m=>G(o,m.target.value)},null,40,Ut)]),s("div",null,l(o.size),1),s("div",null,l(o.price)+" ₽",1)]))),128)),s("div",qt,[s("div",Tt,[s("div",null,[e[9]||(e[9]=s("div",{class:"total-text"},"Итого",-1)),s("div",jt,l(Z())+" ₽",1)])]),s("div",{class:"total-section__button"},[s("a",{class:"btn btn-primary submit-btn btn__red",onClick:tt}," ЗАПРОСИТЬ ")])]),e[11]||(e[11]=s("div",{class:"note"}," *указанная сумма не включает в себя стоимость нанесения логотипа ",-1))])):E("",!0),e[19]||(e[19]=s("button",{class:"order-btn"}," Заказ принимается на сумму от 5000 Руб.. ",-1)),s("div",At,[s("div",Pt,[s("button",{class:h(["tab-btn",{active:u.value==="description"}]),onClick:e[1]||(e[1]=o=>k("description"))}," Описание ",2),s("button",{class:h(["tab-btn",{active:u.value==="characteristics"}]),onClick:e[2]||(e[2]=o=>k("characteristics"))}," Характеристики ",2),s("button",{class:h(["tab-btn",{active:u.value==="payment"}]),onClick:e[3]||(e[3]=o=>k("payment"))}," Оплата ",2),s("button",{class:h(["tab-btn",{active:u.value==="delivery"}]),onClick:e[4]||(e[4]=o=>k("delivery"))}," Доставка ",2)]),y(s("div",Dt,[s("div",{class:"property-item",innerHTML:v.value.description},null,8,Mt)],512),[[I,u.value==="description"]]),y(s("div",Bt,[s("div",Ft,[e[12]||(e[12]=s("div",{class:"property-title"},"Цвет",-1)),s("div",null,l(v.value.characteristics.color),1)]),s("div",Ot,[e[13]||(e[13]=s("div",{class:"property-title"},"Размеры",-1)),s("div",null,l(v.value.characteristics.size),1)]),s("div",Wt,[e[14]||(e[14]=s("div",{class:"property-title"},"Габариты",-1)),s("div",null,l(v.value.characteristics.dimensions),1)])],512),[[I,u.value==="characteristics"]]),y(s("div",Ht,[s("div",Qt,[e[15]||(e[15]=s("div",{class:"property-title"},"Способы оплаты",-1)),s("div",null,l(v.value.payment.methods),1)]),s("div",Rt,[e[16]||(e[16]=s("div",{class:"property-title"},"Рассрочка",-1)),s("div",null,l(v.value.payment.installment),1)])],512),[[I,u.value==="payment"]]),y(s("div",Jt,[s("div",Kt,[e[17]||(e[17]=s("div",{class:"property-title"},"Сроки доставки",-1)),s("div",null,l(v.value.delivery.time),1)]),s("div",Xt,[e[18]||(e[18]=s("div",{class:"property-title"},"Стоимость",-1)),s("div",null,l(v.value.delivery.cost),1)])],512),[[I,u.value==="delivery"]])])])])])])]))}};export{Gt as default};
