import{s as _,y as ot,p as n,c as r,o as d,b as U,a as s,w as it,t as l,u as lt,m as at,A as H,j as q,F as C,g as A,d as I,e as y,n as b,q as nt,B as x}from"./app-DDXHtuLg.js";import{u as ct,_ as rt}from"./Header-DOCgT1_y.js";import{F as dt}from"./Footer-DFce5KjQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ut={class:"wrapper"},vt={class:"main"},mt={class:"container"},pt={class:"product-title"},_t={class:"product-container"},bt={class:"col-md-5"},ht=["src","data-src"],gt={key:0,class:"product__block thumbnails-slider"},ft=["src","onClick","onError"],yt={class:"col-md-6"},kt={class:"row__order__desc"},$t={class:"col-md-5"},Ct={class:"product-details"},It={class:"detail-item"},xt={class:"detail-item"},wt={class:"detail-item"},zt={class:"custom-checkbox-container",id:"customCheckboxContainer"},St={key:0},Vt={class:"product-price"},Nt={class:"vertical__block"},Et={class:"vertical-thumbnails"},Lt=["src","alt","onClick"],Ut={key:0,class:"order-block"},qt={class:"stock"},At=["value","onInput"],Tt={class:"total-section__bock"},jt={class:"total-section"},Pt={class:"total-price"},Ft={class:"tabs-container"},Mt={class:"tab-buttons"},Bt={id:"description",class:"tab-content"},Dt=["innerHTML"],Ot={id:"characteristics",class:"tab-content"},Wt={class:"property-item"},Ht={class:"property-item"},Qt={class:"property-item"},Rt={id:"payment",class:"tab-content"},Jt={class:"property-item"},Kt={class:"property-item"},Xt={id:"delivery",class:"tab-content"},Yt={class:"property-item"},Zt={class:"property-item"},oe={__name:"Show",props:{product:{type:Object,required:!0},categories:Array,subcategories:Array},setup(T){const w=ct(),h=_(!1);w.printingCost,ot(()=>{if(a.product.variants&&a.product.variants.length>0){const e=a.product.variants[0];D(e)}});const a=T,g=_(V(a.product)),j=_(null),p=_(null),u=_("description"),k=e=>{console.log("Switching to tab:",e),u.value=e},v=n(()=>({description:a.product.content||"Описание товара отсутствует",characteristics:{color:p.value||"Не указан",size:f.value.map(e=>e.size).join(", ")||"Не указан",dimensions:c.value.dimensions||"Не указаны"},payment:{methods:"Наличные, карта, безналичный расчет",installment:"До 12 месяцев"},delivery:{time:"1-3 рабочих дня",cost:"Бесплатно при заказе от 5000 Руб."}})),P=n(()=>{const e={};return a.product.variants.forEach(t=>{`${t.color}${t.size}`,e[t.color]||(e[t.color]={}),e[t.color][t.size]||(e[t.color][t.size]={...t,total:0,variants:[]}),e[t.color][t.size].total+=t.total||0,e[t.color][t.size].variants.push(t)}),e}),c=n(()=>j.value||a.product),F=n(()=>c.value.total||0),M=n(()=>c.value.article||""),Q=n(()=>c.value.sklad||"Москва"),B=n(()=>{const e=new Set,t=[];return a.product.variants.forEach(o=>{e.has(o.color)||(e.add(o.color),t.push(o))}),t});n(()=>{const e=[V(c.value)];return B.value.forEach(t=>{const o=N(t);o&&!e.includes(o)&&e.push(o)}),e});const z=e=>{if(!(e!=null&&e.title))return"";const t=e.title.indexOf(",");let o=t>0?e.title.substring(0,t).trim():e.title;if(e.color){const i=e.color.toLowerCase();o.toLowerCase().includes(i)||(o+=`, ${e.color}`)}return o},S=n(()=>{if(!c.value)return[];const e=V(c.value),t=e.split("/"),o=t[t.length-1],i=e.replace(o,""),m=[];for(let L=1;L<=5;L++){const et=`${L}_${o}`,st=`${i}${et}`;m.push(st)}return m}),$=_([]),R=n(()=>S.value.some(e=>!$.value.includes(e))),J=n(()=>S.value.filter(e=>!$.value.includes(e)));function K(e){const t=S.value[e];$.value.includes(t)||$.value.push(t)}function D(e){j.value=Y(e),g.value=N(e),p.value=e.color}const f=n(()=>!p.value||!P.value[p.value]?[]:Object.values(P.value[p.value]));function X(e){g.value=e}function V(e){const t=e.url_img||e.photo;if(t&&t!=="1")return O(t);const o=e.sid,i=e.tovar_id||e.id_parent||e.id;return o&&i?`https://mvgifts.ru/img/tovars/${o}/${i}/${i}.jpg`:"https://via.placeholder.com/200?text=No+Image"}function N(e){const t=e.photo||e.url_img;if(t&&t!=="1")return O(t);const o=e.sid||a.product.sid,i=e.tovar_id||e.id_parent||e.id;return o&&i?`https://mvgifts.ru/img/tovars/${o}/${i}/${i}.jpg`:"https://via.placeholder.com/40?text=No+Img"}function O(e){return e?e.startsWith("http")?e:`https://mvgifts.ru${e.startsWith("/")?"":"/"}${e}`:""}function Y(e){return{...e,sid:e.sid||a.product.sid,tovar_id:e.tovar_id||e.id_parent||e.id,url_img:e.photo||e.url_img||a.product.url_img}}const E=_({});function Z(){let e=0;return f.value&&f.value.forEach(t=>{const o=`${t.color}_${t.size}`,i=E.value[o]||0;e+=i*t.price}),e.toLocaleString("ru-RU")}function W(e){const t=`${e.color}_${e.size}`;return E.value[t]||0}function G(e,t){const o=`${e.color}_${e.size}`;E.value[o]=Number(t)}function tt(){f.value.forEach(e=>{const t=W(e);t>0&&w.addItem({id:`${a.product.id}_${e.color}_${e.size}`,title:z(c.value),price:e.price,article:M.value},e.color,e.size,t,g.value,h.value)}),w.openCart()}return(e,t)=>(d(),r(C,null,[U(lt(at),null,{default:it(()=>[s("title",null,l(z(c.value)),1)]),_:1}),s("div",ut,[U(rt,{categories:T.categories},null,8,["categories"]),s("main",vt,[t[21]||(t[21]=H('<section class="breadcrumbs__block"><div class="container"><div class="breadcrumbs-container"><div class="row"><div class="col-xl-2"></div><div class="col-xl-8 crumbs"><div class="breadcrumbs-content"></div></div><div class="col-xl-2"></div></div></div></div></section>',1)),s("div",mt,[s("h1",pt,l(z(c.value)),1),s("div",_t,[s("div",bt,[s("img",{id:"mainImage",src:g.value,"data-fancybox":"gallery","data-src":g.value,alt:"Основное фото товара",class:"main-image"},null,8,ht),R.value?(d(),r("div",gt,[(d(!0),r(C,null,A(J.value,(o,i)=>(d(),r("div",{class:"thumb-item",key:i},[s("img",{src:o,alt:"Дополнительное фото",class:b(["thumbnail",{active:g.value===o}]),onClick:m=>X(o),onError:m=>K(i)},null,42,ft)]))),128))])):q("",!0)]),s("div",yt,[s("div",kt,[s("div",$t,[s("div",Ct,[s("div",It,[t[5]||(t[5]=s("span",{class:"detail-label"},"Артикул:",-1)),I(" "+l(M.value),1)]),s("div",xt,[t[6]||(t[6]=s("span",{class:"detail-label"},"Склад:",-1)),I(" "+l(Q.value),1)]),s("div",wt,[t[7]||(t[7]=s("span",{class:"detail-label"},"Количество:",-1)),I(" "+l(F.value>0?F.value+" шт.":"по запросу"),1)]),t[9]||(t[9]=s("div",{class:"detail-item"},[s("span",{class:"detail-label"},"Срок доставки:"),s("a",{href:""}," по запросу")],-1)),s("div",zt,[s("label",{for:"customCheckbox",class:b({"custom-checkbox-label":!0,active:h.value})},[I(l(h.value?"С нанесением":"Без нанесения")+" ",1),h.value?(d(),r("span",St)):q("",!0),t[8]||(t[8]=s("span",{class:"circle"},null,-1))],2),y(s("input",{type:"checkbox",class:"",id:"customCheckbox","onUpdate:modelValue":t[0]||(t[0]=o=>h.value=o)},null,512),[[nt,h.value]])]),s("div",Vt,l(c.value.price)+" ₽",1)])]),s("div",Nt,[s("div",Et,[(d(!0),r(C,null,A(B.value,(o,i)=>(d(),r("img",{key:"variant-"+i,src:N(o),alt:{variant:o},class:b(["small-thumbnail",{active:p.value===o.color}]),onClick:m=>D(o)},null,10,Lt))),128))])])]),p.value?(d(),r("div",Ut,[t[11]||(t[11]=H('<div class="grid-header"><div class="header-item">Наличие</div><div class="header-item">Введите количество</div><div class="header-item">Размер</div><div class="header-item">Цена</div></div>',1)),(d(!0),r(C,null,A(f.value,(o,i)=>(d(),r("div",{class:"product-row",key:i},[s("div",qt,l(o.total>0?o.total+" шт":"по запросу"),1),s("div",null,[s("input",{type:"text",min:"0",class:"quantity-input",value:W(o),onInput:m=>G(o,m.target.value)},null,40,At)]),s("div",null,l(o.size),1),s("div",null,l(o.price)+" ₽",1)]))),128)),s("div",Tt,[s("div",jt,[s("div",null,[t[10]||(t[10]=s("div",{class:"total-text"},"Итого",-1)),s("div",Pt,l(Z())+" ₽",1)])]),s("div",{class:"total-section__button"},[s("a",{class:"btn btn-primary submit-btn btn__red",onClick:tt}," ЗАПРОСИТЬ ")])]),t[12]||(t[12]=s("div",{class:"note"}," *указанная сумма не включает в себя стоимость нанесения логотипа ",-1))])):q("",!0),t[20]||(t[20]=s("button",{class:"order-btn"}," Заказ принимается на сумму от 5000 Руб.. ",-1)),s("div",Ft,[s("div",Mt,[s("button",{class:b(["tab-btn",{active:u.value==="description"}]),onClick:t[1]||(t[1]=o=>k("description"))}," Описание ",2),s("button",{class:b(["tab-btn",{active:u.value==="characteristics"}]),onClick:t[2]||(t[2]=o=>k("characteristics"))}," Характеристики ",2),s("button",{class:b(["tab-btn",{active:u.value==="payment"}]),onClick:t[3]||(t[3]=o=>k("payment"))}," Оплата ",2),s("button",{class:b(["tab-btn",{active:u.value==="delivery"}]),onClick:t[4]||(t[4]=o=>k("delivery"))}," Доставка ",2)]),y(s("div",Bt,[s("div",{class:"property-item",innerHTML:v.value.description},null,8,Dt)],512),[[x,u.value==="description"]]),y(s("div",Ot,[s("div",Wt,[t[13]||(t[13]=s("div",{class:"property-title"},"Цвет",-1)),s("div",null,l(v.value.characteristics.color),1)]),s("div",Ht,[t[14]||(t[14]=s("div",{class:"property-title"},"Размеры",-1)),s("div",null,l(v.value.characteristics.size),1)]),s("div",Qt,[t[15]||(t[15]=s("div",{class:"property-title"},"Габариты",-1)),s("div",null,l(v.value.characteristics.dimensions),1)])],512),[[x,u.value==="characteristics"]]),y(s("div",Rt,[s("div",Jt,[t[16]||(t[16]=s("div",{class:"property-title"},"Способы оплаты",-1)),s("div",null,l(v.value.payment.methods),1)]),s("div",Kt,[t[17]||(t[17]=s("div",{class:"property-title"},"Рассрочка",-1)),s("div",null,l(v.value.payment.installment),1)])],512),[[x,u.value==="payment"]]),y(s("div",Xt,[s("div",Yt,[t[18]||(t[18]=s("div",{class:"property-title"},"Сроки доставки",-1)),s("div",null,l(v.value.delivery.time),1)]),s("div",Zt,[t[19]||(t[19]=s("div",{class:"property-title"},"Стоимость",-1)),s("div",null,l(v.value.delivery.cost),1)])],512),[[x,u.value==="delivery"]])])])])])]),U(dt)])],64))}};export{oe as default};
